#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.ComponentModel.DataAnnotations;
    using System.ComponentModel.Design;
    using System.IO;
    using System.Linq;
    using System.Linq.Expressions;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Mvc.Routing;
    using System.Web.Optimization;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 3 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
    using LCore.Extensions;
    
    #line default
    #line hidden
    using Singularity;
    
    #line 4 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
    using Singularity.Annotations;
    
    #line default
    #line hidden
    using Singularity.Context;
    using Singularity.Controllers;
    
    #line 5 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
    using Singularity.Extensions;
    
    #line default
    #line hidden
    using Singularity.Models;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Shared/Manage/Fields/FileUpload.cshtml")]
    public partial class _Views_Shared_Manage_Fields_FileUpload_cshtml : System.Web.Mvc.WebViewPage<IViewField>
    {
        public _Views_Shared_Manage_Fields_FileUpload_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("\r\n\r\n");

WriteLiteral("\r\n");

            
            #line 7 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
  
    var Context = ContextProviderFactory.GetCurrent().GetContext(Session);

    // ReSharper disable RedundantNameQualifier
    var CurrentFiles = new List<global::Singularity.Models.FileUpload >();

    var Attr = Model.Meta.GetAttribute<IFileUpload>();

    if (Context.ContextTypes.Has(typeof(global::Singularity.Models.FileUpload)))
        {
        CurrentFiles = global::Singularity.Models.FileUpload.GetFileUploads(Context, Model.ModelData, Model.PropertyName).List();
        }
    // ReSharper restore RedundantNameQualifier

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n");

            
            #line 24 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
 if (Model.ViewTypes.Has(ControllerHelper.ViewType.Edit))
    {
    if (CurrentFiles.Count > 0 &&
        !Attr.AllowMultipleUploads)
        {
        }
    else
        {

            
            #line default
            #line hidden
WriteLiteral("        <div");

WriteAttribute("id", Tuple.Create(" id=\"", 891), Tuple.Create("\"", 927)
, Tuple.Create(Tuple.Create("", 896), Tuple.Create("upload-file-", 896), true)
            
            #line 32 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 908), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 908), false)
);

WriteLiteral(">\r\n\r\n            <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n                $(document).ready(function () {\r\n                    $(\'#file-" +
"upload-button-");

            
            #line 36 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                      Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').click(function () {\r\n\r\n                        $(\'.file-upload-error-no-file-");

            
            #line 38 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                 Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').hide();\r\n\r\n                        const fileName = $(\'#file-upload-");

            
            #line 40 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                    Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').val();\r\n                        if (!fileName) {\r\n                            " +
"$(\'.file-upload-error-no-file-");

            
            #line 42 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                     Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').show();\r\n                            return;\r\n                        }\r\n\r\n   " +
"                     $(\'#file-upload-button-");

            
            #line 46 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                          Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').attr(\'disabled\', \'true\');\r\n                        $(\'#file-upload-button-");

            
            #line 47 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                          Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral(" span\').html(\'Uploading\');\r\n\r\n                        var size = null;\r\n\r\n       " +
"                 const restrictFileType = ");

            
            #line 51 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                             Write(Attr.AllowFileTypes == null || Attr.AllowFileTypes.Length == 0 ? "false" : "true");

            
            #line default
            #line hidden
WriteLiteral(";\r\n\r\n                        $(\'.file-upload-error-incorrect-type-");

            
            #line 53 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                         Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').hide();\r\n                        if (restrictFileType) {\r\n                    " +
"        const fileTypes = ");

            
            #line 55 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                         Write(Html.Raw($"[\'{Attr.AllowFileTypes.JoinLines("','").ToLower().ReplaceAll(".", "")}\']"));

            
            #line default
            #line hidden
WriteLiteral(@";

                            let typeFound = false;
                            for (let i = 0 ; i < fileTypes.length; i++)
                            {
                                if (fileName.toLowerCase().indexOf(fileTypes[i]) == fileName.length - fileTypes[i].length)
                                {
                                    typeFound = true;
                                    break;
                                }
                            }
                            if (!typeFound)
                            {
                                $('.file-upload-error-incorrect-type-");

            
            #line 68 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                                 Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').show();\r\n                                return;\r\n                            " +
"}\r\n                        }\r\n\r\n                        if ($(\'#file-upload-");

            
            #line 73 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                        Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\')[0].files && $(\'#file-upload-");

            
            #line 73 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                                                            Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\')[0].files[0])\r\n                            size = $(\'#file-upload-");

            
            #line 74 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                               Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\')[0].files[0].size;\r\n\r\n                        $(\'.file-upload-error-too-small-");

            
            #line 76 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                    Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').hide();\r\n                        $(\'.file-upload-error-too-large-");

            
            #line 77 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                    Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').hide();\r\n\r\n                        if (size != null) {\r\n\r\n                    " +
"        if (size < ");

            
            #line 81 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                   Write(Attr.SizeMinimum);

            
            #line default
            #line hidden
WriteLiteral(" )\r\n                            {\r\n                            $(\'.file-upload-er" +
"ror-too-small-");

            
            #line 83 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                        Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').show();\r\n                            return;\r\n                        }\r\n\r\n   " +
"                     if (size > ");

            
            #line 87 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                               Write(Attr.SizeMaximum);

            
            #line default
            #line hidden
WriteLiteral(" )\r\n                        {\r\n                        $(\'.file-upload-error-too-" +
"large-");

            
            #line 89 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                    Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').show();\r\n                        return;\r\n                    }\r\n             " +
"       }\r\n\r\n                    const parentForm = $(\'#file-upload-button-");

            
            #line 94 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                         Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').parents(\'form\')[0];\r\n\r\n                $.ajax({\r\n                    url: \'/");

            
            #line 97 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                       Write(Html.ControllerName());

            
            #line default
            #line hidden
WriteLiteral("/UploadFile?ReturnURL=");

            
            #line 97 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                                    Write(Request.Url);

            
            #line default
            #line hidden
WriteLiteral("?.AbsoluteUri&RelationType=");

            
            #line 97 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                                                                           Write(Model.ModelData.TrueModelType().FullName);

            
            #line default
            #line hidden
WriteLiteral("&RelationProperty=");

            
            #line 97 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                                                                                                                                      Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("&RelationID=");

            
            #line 97 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                                                                                                                                                                     Write(Model.ModelData.GetID());

            
            #line default
            #line hidden
WriteLiteral(@"',
                    type: 'POST',
                    data: new FormData(parentForm),
                    processData: false,
                    contentType: false,

                    success: function () {
                        location.reload();
                    },
                    error: function (e) {
                        console.log(e);
                        $('.file-upload-error-");

            
            #line 108 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                         Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').show();\r\n                    }\r\n                });\r\n                });\r\n    " +
"            });\r\n            </script>\r\n\r\n            <input");

WriteLiteral(" type=\"file\"");

WriteLiteral(" class=\"file-upload\"");

WriteAttribute("id", Tuple.Create(" id=\"", 4834), Tuple.Create("\"", 4870)
, Tuple.Create(Tuple.Create("", 4839), Tuple.Create("file-upload-", 4839), true)
            
            #line 115 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 4851), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 4851), false)
);

WriteAttribute("name", Tuple.Create(" name=\"", 4871), Tuple.Create("\"", 4909)
, Tuple.Create(Tuple.Create("", 4878), Tuple.Create("UploadFile", 4878), true)
            
            #line 115 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                         , Tuple.Create(Tuple.Create("", 4888), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 4888), false)
);

WriteLiteral(" />\r\n\r\n            <div");

WriteAttribute("class", Tuple.Create(" class=\"", 4933), Tuple.Create("\"", 4999)
, Tuple.Create(Tuple.Create("", 4941), Tuple.Create("file-upload-error-incorrect-type-", 4941), true)
            
            #line 117 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 4974), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 4974), false)
, Tuple.Create(Tuple.Create(" ", 4993), Tuple.Create("error", 4994), true)
);

WriteLiteral(" style=\"display:none;\"");

WriteLiteral(">\r\n                File types allowed: ");

            
            #line 118 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                Write(Attr.AllowFileTypes.JoinLines(", ").ToUpper().ReplaceAll(".", ""));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </div>\r\n\r\n            <div");

WriteAttribute("class", Tuple.Create(" class=\"", 5169), Tuple.Create("\"", 5230)
, Tuple.Create(Tuple.Create("", 5177), Tuple.Create("file-upload-error-too-large-", 5177), true)
            
            #line 121 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 5205), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 5205), false)
, Tuple.Create(Tuple.Create(" ", 5224), Tuple.Create("error", 5225), true)
);

WriteLiteral(" style=\"display:none;\"");

WriteLiteral(">\r\n                Upload can not be larger than <b>");

            
            #line 122 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                            Write(Attr.SizeMaximum.FormatFileSize(2));

            
            #line default
            #line hidden
WriteLiteral("</b>\r\n            </div>\r\n\r\n            <div");

WriteAttribute("class", Tuple.Create(" class=\"", 5384), Tuple.Create("\"", 5445)
, Tuple.Create(Tuple.Create("", 5392), Tuple.Create("file-upload-error-too-small-", 5392), true)
            
            #line 125 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 5420), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 5420), false)
, Tuple.Create(Tuple.Create(" ", 5439), Tuple.Create("error", 5440), true)
);

WriteLiteral(" style=\"display:none;\"");

WriteLiteral(">\r\n                Upload must be at least <b>");

            
            #line 126 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                      Write(Attr.SizeMinimum.FormatFileSize(2));

            
            #line default
            #line hidden
WriteLiteral("</b>\r\n            </div>\r\n\r\n            <div");

WriteAttribute("class", Tuple.Create(" class=\"", 5593), Tuple.Create("\"", 5652)
, Tuple.Create(Tuple.Create("", 5601), Tuple.Create("file-upload-error-no-file-", 5601), true)
            
            #line 129 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 5627), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 5627), false)
, Tuple.Create(Tuple.Create(" ", 5646), Tuple.Create("error", 5647), true)
);

WriteLiteral(" style=\"display:none;\"");

WriteLiteral(">\r\n                Please select a file to upload.\r\n            </div>\r\n\r\n       " +
"     <div");

WriteAttribute("class", Tuple.Create(" class=\"", 5765), Tuple.Create("\"", 5816)
, Tuple.Create(Tuple.Create("", 5773), Tuple.Create("file-upload-error-", 5773), true)
            
            #line 133 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 5791), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 5791), false)
, Tuple.Create(Tuple.Create(" ", 5810), Tuple.Create("error", 5811), true)
);

WriteLiteral(" style=\"display:none;\"");

WriteLiteral(">\r\n                An error occured while uploading this file.\r\n            </div" +
">\r\n\r\n            <div");

WriteLiteral(" class=\"btn btn-default\"");

WriteAttribute("id", Tuple.Create(" id=\"", 5965), Tuple.Create("\"", 6008)
, Tuple.Create(Tuple.Create("", 5970), Tuple.Create("file-upload-button-", 5970), true)
            
            #line 137 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 5989), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 5989), false)
);

WriteLiteral(">\r\n                <glyph>&#xE027;</glyph>\r\n                <span>Upload</span>\r\n" +
"            </div>\r\n        </div>\r\n");

            
            #line 142 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
        }
    }
else if (Model.ViewTypes.Has(ControllerHelper.ViewType.TableCell))
    {
    }
else if (Model.ViewTypes.Has(ControllerHelper.ViewType.Display))
    {
    }

            
            #line default
            #line hidden
WriteLiteral("\r\n");

            
            #line 151 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
 if (Model.ViewTypes.Has(ControllerHelper.ViewType.Edit) ||
                Model.ViewTypes.Has(ControllerHelper.ViewType.Display))
    {
    foreach (var File in CurrentFiles)
        {
        string Ext = Path.GetExtension(File.FilePath);

        if (Ext != null && Ext.StartsWith("."))
            {
            Ext = Ext.Substring(1);
            }


            
            #line default
            #line hidden
WriteLiteral("        <div");

WriteLiteral(" class=\"display-file border-round\"");

WriteLiteral(">\r\n\r\n            <div");

WriteLiteral(" class=\"file-icon\"");

WriteLiteral(">\r\n                <a");

WriteAttribute("href", Tuple.Create(" href=\"", 6782), Tuple.Create("\"", 6873)
            
            #line 166 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 6789), Tuple.Create<System.Object, System.Int32>(Url.Controller<ManageController>().Action(c => c.DownloadFile, File.FileUploadID)
            
            #line default
            #line hidden
, 6789), false)
);

WriteLiteral(">\r\n                    <img");

WriteAttribute("src", Tuple.Create(" src=\"", 6901), Tuple.Create("\"", 6937)
, Tuple.Create(Tuple.Create("", 6907), Tuple.Create("/Content/icons/32px/", 6907), true)
            
            #line 167 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 6927), Tuple.Create<System.Object, System.Int32>(Ext
            
            #line default
            #line hidden
, 6927), false)
, Tuple.Create(Tuple.Create("", 6933), Tuple.Create(".png", 6933), true)
);

WriteLiteral(" alt=\"Image not found\"");

WriteLiteral(" error-src=\"/Content/icons/32px/_blank.png\"");

WriteLiteral(" />\r\n                </a>\r\n            </div>\r\n            <div>\r\n               " +
" <a");

WriteAttribute("href", Tuple.Create(" href=\"", 7087), Tuple.Create("\"", 7178)
            
            #line 171 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 7094), Tuple.Create<System.Object, System.Int32>(Url.Controller<ManageController>().Action(c => c.DownloadFile, File.FileUploadID)
            
            #line default
            #line hidden
, 7094), false)
);

WriteLiteral(">\r\n                    Name:\r\n");

WriteLiteral("                    ");

            
            #line 173 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
               Write(Path.GetFileName(File.FilePath));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </a>\r\n            </div>\r\n\r\n            <div>\r\n                " +
"Size:\r\n");

WriteLiteral("                ");

            
            #line 179 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
           Write(File.FileSize.FormatFileSize(1));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </div>\r\n\r\n");

            
            #line 182 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
            
            
            #line default
            #line hidden
            
            #line 182 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
             if (Attr.AllowDeactivate)
                {

            
            #line default
            #line hidden
WriteLiteral("                <a");

WriteLiteral(" class=\"btn btn-default\"");

WriteAttribute("id", Tuple.Create(" id=\"", 7522), Tuple.Create("\"", 7565)
, Tuple.Create(Tuple.Create("", 7527), Tuple.Create("file-upload-button-", 7527), true)
            
            #line 184 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 7546), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 7546), false)
);

WriteAttribute("href", Tuple.Create("\r\n                   href=\"", 7566), Tuple.Create("\"", 7701)
            
            #line 185 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 7593), Tuple.Create<System.Object, System.Int32>(Url.Controller<ManageController>().Action(c => c.DeleteFile, File.FileUploadID, Request.Url?.AbsoluteUri)
            
            #line default
            #line hidden
, 7593), false)
);

WriteLiteral(">\r\n                    <glyph>&#xe014;</glyph>\r\n                    Remove\r\n     " +
"           </a>\r\n");

            
            #line 189 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                }

            
            #line default
            #line hidden
WriteLiteral("        </div>\r\n");

            
            #line 191 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
        }
    }

            
            #line default
            #line hidden
        }
    }
}
#pragma warning restore 1591
