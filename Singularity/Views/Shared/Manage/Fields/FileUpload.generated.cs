#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.ComponentModel.DataAnnotations;
    using System.ComponentModel.Design;
    using System.IO;
    using System.Linq;
    using System.Linq.Expressions;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Mvc.Routing;
    using System.Web.Optimization;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 3 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
    using LCore.Extensions;
    
    #line default
    #line hidden
    using LMVC;
    using LMVC.Account;
    using LMVC.Annotations;
    using LMVC.Context;
    using LMVC.Controllers;
    using LMVC.Extensions;
    using LMVC.Models;
    using Singularity;
    
    #line 4 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
    using Singularity.Extensions;
    
    #line default
    #line hidden
    using Singularity.Models;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Shared/Manage/Fields/FileUpload.cshtml")]
    public partial class _Views_Shared_Manage_Fields_FileUpload_cshtml : System.Web.Mvc.WebViewPage<IViewField>
    {
        public _Views_Shared_Manage_Fields_FileUpload_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("\r\n\r\n");

WriteLiteral("\r\n");

            
            #line 6 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
    
            
            #line default
            #line hidden
            
            #line 6 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
      
        var Context = ContextProviderFactory.GetCurrent().GetContext(Session);

        // ReSharper disable RedundantNameQualifier
        var CurrentFiles = new List<FileUpload>();

        var Attr = Model.Meta.GetAttribute<IFileUpload>();

        if (Context.ContextTypes.Has(typeof(FileUpload)))
            {
            CurrentFiles = FileUpload.GetFileUploads(Context, Model.ModelData, Model.PropertyName).List();
            }
        // ReSharper restore RedundantNameQualifier
    
            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n");

            
            #line 21 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
    
            
            #line default
            #line hidden
WriteLiteral("    ");

            
            #line 23 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
     if (Model.ViewTypes.Has(ControllerHelper.ViewType.Edit))
        {
        if (CurrentFiles.Count > 0 &&
            !Attr.AllowMultipleUploads)
            {
            }
        else
            {

            
            #line default
            #line hidden
WriteLiteral("            <div");

WriteAttribute("id", Tuple.Create(" id=\"", 860), Tuple.Create("\"", 896)
, Tuple.Create(Tuple.Create("", 865), Tuple.Create("upload-file-", 865), true)
            
            #line 31 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 877), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 877), false)
);

WriteLiteral(">\r\n\r\n                <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n                    $(document).ready(function () {\r\n                        $" +
"(\'#file-upload-button-");

            
            #line 35 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                          Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').click(function () {\r\n\r\n                            $(\'.file-upload-error-no-fi" +
"le-");

            
            #line 37 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                     Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').hide();\r\n\r\n                            const fileName = $(\'#file-upload-");

            
            #line 39 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                        Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').val();\r\n                            if (!fileName) {\r\n                        " +
"        $(\'.file-upload-error-no-file-");

            
            #line 41 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                         Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').show();\r\n                                return;\r\n                            " +
"}\r\n\r\n                            $(\'#file-upload-button-");

            
            #line 45 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                              Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').attr(\'disabled\', \'true\');\r\n                            $(\'#file-upload-button-" +
"");

            
            #line 46 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                              Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral(" span\').html(\'Uploading\');\r\n\r\n                            var size = null;\r\n\r\n   " +
"                         const restrictFileType = ");

            
            #line 50 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                 Write(Attr.AllowFileTypes == null || Attr.AllowFileTypes.Length == 0 ? "false" : "true");

            
            #line default
            #line hidden
WriteLiteral(";\r\n\r\n                            $(\'.file-upload-error-incorrect-type-");

            
            #line 52 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                             Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').hide();\r\n                            if (restrictFileType) {\r\n                " +
"                const fileTypes = ");

            
            #line 54 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                             Write(Html.Raw($"[\'{Attr.AllowFileTypes.JoinLines("','").ToLower().ReplaceAll(".", "")}\']"));

            
            #line default
            #line hidden
WriteLiteral(@";

                                let typeFound = false;
                                for (let i = 0 ; i < fileTypes.length; i++)
                                {
                                    if (fileName.toLowerCase().indexOf(fileTypes[i]) == fileName.length - fileTypes[i].length)
                                    {
                                        typeFound = true;
                                        break;
                                    }
                                }
                                if (!typeFound)
                                {
                                    $('.file-upload-error-incorrect-type-");

            
            #line 67 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                                     Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').show();\r\n                                    return;\r\n                        " +
"        }\r\n                            }\r\n\r\n                            if ($(\'#" +
"file-upload-");

            
            #line 72 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                            Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\')[0].files && $(\'#file-upload-");

            
            #line 72 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                                                                Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\')[0].files[0])\r\n                                size = $(\'#file-upload-");

            
            #line 73 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                   Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\')[0].files[0].size;\r\n\r\n                            $(\'.file-upload-error-too-sma" +
"ll-");

            
            #line 75 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                        Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').hide();\r\n                            $(\'.file-upload-error-too-large-");

            
            #line 76 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                        Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').hide();\r\n\r\n                            if (size != null) {\r\n\r\n                " +
"                if (size < ");

            
            #line 80 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                       Write(Attr.SizeMinimum);

            
            #line default
            #line hidden
WriteLiteral(" )\r\n                                {\r\n                                $(\'.file-u" +
"pload-error-too-small-");

            
            #line 82 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                            Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').show();\r\n                                return;\r\n                            " +
"}\r\n\r\n                            if (size > ");

            
            #line 86 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                   Write(Attr.SizeMaximum);

            
            #line default
            #line hidden
WriteLiteral(" )\r\n                            {\r\n                            $(\'.file-upload-er" +
"ror-too-large-");

            
            #line 88 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                        Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').show();\r\n                            return;\r\n                        }\r\n     " +
"                   }\r\n\r\n                        const parentForm = $(\'#file-uplo" +
"ad-button-");

            
            #line 93 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                             Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').parents(\'form\')[0];\r\n\r\n                    $.ajax({\r\n                        u" +
"rl: \'/");

            
            #line 96 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                           Write(Html.ControllerName());

            
            #line default
            #line hidden
WriteLiteral("/UploadFile?ReturnURL=");

            
            #line 96 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                                        Write(Request.Url);

            
            #line default
            #line hidden
WriteLiteral("?.AbsoluteUri&RelationType=");

            
            #line 96 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                                                                               Write(Model.ModelData.TrueModelType().FullName);

            
            #line default
            #line hidden
WriteLiteral("&RelationProperty=");

            
            #line 96 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                                                                                                                                          Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("&RelationID=");

            
            #line 96 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                                                                                                                                                                         Write(Model.ModelData.GetID());

            
            #line default
            #line hidden
WriteLiteral(@"',
                        type: 'POST',
                        data: new FormData(parentForm),
                        processData: false,
                        contentType: false,

                        success: function () {
                            location.reload();
                        },
                        error: function (e) {
                            console.log(e);
                            $('.file-upload-error-");

            
            #line 107 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                             Write(Model.PropertyName);

            
            #line default
            #line hidden
WriteLiteral("\').show();\r\n                        }\r\n                    });\r\n                 " +
"   });\r\n                    });\r\n                </script>\r\n\r\n                <i" +
"nput");

WriteLiteral(" type=\"file\"");

WriteLiteral(" class=\"file-upload\"");

WriteAttribute("id", Tuple.Create(" id=\"", 5067), Tuple.Create("\"", 5103)
, Tuple.Create(Tuple.Create("", 5072), Tuple.Create("file-upload-", 5072), true)
            
            #line 114 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 5084), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 5084), false)
);

WriteAttribute("name", Tuple.Create(" name=\"", 5104), Tuple.Create("\"", 5142)
, Tuple.Create(Tuple.Create("", 5111), Tuple.Create("UploadFile", 5111), true)
            
            #line 114 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                             , Tuple.Create(Tuple.Create("", 5121), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 5121), false)
);

WriteLiteral(" />\r\n\r\n                <div");

WriteAttribute("class", Tuple.Create(" class=\"", 5170), Tuple.Create("\"", 5236)
, Tuple.Create(Tuple.Create("", 5178), Tuple.Create("file-upload-error-incorrect-type-", 5178), true)
            
            #line 116 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 5211), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 5211), false)
, Tuple.Create(Tuple.Create(" ", 5230), Tuple.Create("error", 5231), true)
);

WriteLiteral(" style=\"display:none;\"");

WriteLiteral(">\r\n                    File types allowed: ");

            
            #line 117 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                    Write(Attr.AllowFileTypes.JoinLines(", ").ToUpper().ReplaceAll(".", ""));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </div>\r\n\r\n                <div");

WriteAttribute("class", Tuple.Create(" class=\"", 5418), Tuple.Create("\"", 5479)
, Tuple.Create(Tuple.Create("", 5426), Tuple.Create("file-upload-error-too-large-", 5426), true)
            
            #line 120 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 5454), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 5454), false)
, Tuple.Create(Tuple.Create(" ", 5473), Tuple.Create("error", 5474), true)
);

WriteLiteral(" style=\"display:none;\"");

WriteLiteral(">\r\n                    Upload can not be larger than <b>");

            
            #line 121 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                                Write(Attr.SizeMaximum.FormatFileSize(2));

            
            #line default
            #line hidden
WriteLiteral("</b>\r\n                </div>\r\n\r\n                <div");

WriteAttribute("class", Tuple.Create(" class=\"", 5645), Tuple.Create("\"", 5706)
, Tuple.Create(Tuple.Create("", 5653), Tuple.Create("file-upload-error-too-small-", 5653), true)
            
            #line 124 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 5681), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 5681), false)
, Tuple.Create(Tuple.Create(" ", 5700), Tuple.Create("error", 5701), true)
);

WriteLiteral(" style=\"display:none;\"");

WriteLiteral(">\r\n                    Upload must be at least <b>");

            
            #line 125 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                                          Write(Attr.SizeMinimum.FormatFileSize(2));

            
            #line default
            #line hidden
WriteLiteral("</b>\r\n                </div>\r\n\r\n                <div");

WriteAttribute("class", Tuple.Create(" class=\"", 5866), Tuple.Create("\"", 5925)
, Tuple.Create(Tuple.Create("", 5874), Tuple.Create("file-upload-error-no-file-", 5874), true)
            
            #line 128 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 5900), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 5900), false)
, Tuple.Create(Tuple.Create(" ", 5919), Tuple.Create("error", 5920), true)
);

WriteLiteral(" style=\"display:none;\"");

WriteLiteral(">\r\n                    Please select a file to upload.\r\n                </div>\r\n\r" +
"\n                <div");

WriteAttribute("class", Tuple.Create(" class=\"", 6050), Tuple.Create("\"", 6101)
, Tuple.Create(Tuple.Create("", 6058), Tuple.Create("file-upload-error-", 6058), true)
            
            #line 132 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 6076), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 6076), false)
, Tuple.Create(Tuple.Create(" ", 6095), Tuple.Create("error", 6096), true)
);

WriteLiteral(" style=\"display:none;\"");

WriteLiteral(">\r\n                    An error occured while uploading this file.\r\n             " +
"   </div>\r\n\r\n                <div");

WriteLiteral(" class=\"btn btn-default\"");

WriteAttribute("id", Tuple.Create(" id=\"", 6262), Tuple.Create("\"", 6305)
, Tuple.Create(Tuple.Create("", 6267), Tuple.Create("file-upload-button-", 6267), true)
            
            #line 136 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 6286), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 6286), false)
);

WriteLiteral(">\r\n                    <glyph>&#xE027;</glyph>\r\n                    <span>Upload<" +
"/span>\r\n                </div>\r\n            </div>\r\n");

            
            #line 141 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
            }
        }
    else if (Model.ViewTypes.Has(ControllerHelper.ViewType.TableCell))
        {
        }
    else if (Model.ViewTypes.Has(ControllerHelper.ViewType.Display))
        {
        }

            
            #line default
            #line hidden
WriteLiteral("\r\n");

            
            #line 150 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
    
            
            #line default
            #line hidden
            
            #line 150 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
     if (Model.ViewTypes.Has(ControllerHelper.ViewType.Edit) ||
                        Model.ViewTypes.Has(ControllerHelper.ViewType.Display))
        {
        foreach (var File in CurrentFiles)
            {
            string Ext = Path.GetExtension(File.FilePath);

            if (Ext != null && Ext.StartsWith("."))
                {
                Ext = Ext.Substring(1);
                }


            
            #line default
            #line hidden
WriteLiteral("            <div");

WriteLiteral(" class=\"display-file border-round\"");

WriteLiteral(">\r\n\r\n                <div");

WriteLiteral(" class=\"file-icon\"");

WriteLiteral(">\r\n                    <a");

WriteAttribute("href", Tuple.Create(" href=\"", 7183), Tuple.Create("\"", 7292)
            
            #line 165 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 7190), Tuple.Create<System.Object, System.Int32>(Url.Controller<ManageController>().Action(Controller => Controller.DownloadFile, File.FileUploadID)
            
            #line default
            #line hidden
, 7190), false)
);

WriteLiteral(">\r\n                        <img");

WriteAttribute("src", Tuple.Create(" src=\"", 7324), Tuple.Create("\"", 7360)
, Tuple.Create(Tuple.Create("", 7330), Tuple.Create("/Content/icons/32px/", 7330), true)
            
            #line 166 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 7350), Tuple.Create<System.Object, System.Int32>(Ext
            
            #line default
            #line hidden
, 7350), false)
, Tuple.Create(Tuple.Create("", 7356), Tuple.Create(".png", 7356), true)
);

WriteLiteral(" alt=\"Image not found\"");

WriteLiteral(" error-src=\"/Content/icons/32px/_blank.png\"");

WriteLiteral(" />\r\n                    </a>\r\n                </div>\r\n                <div>\r\n   " +
"                 <a");

WriteAttribute("href", Tuple.Create(" href=\"", 7526), Tuple.Create("\"", 7635)
            
            #line 170 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 7533), Tuple.Create<System.Object, System.Int32>(Url.Controller<ManageController>().Action(Controller => Controller.DownloadFile, File.FileUploadID)
            
            #line default
            #line hidden
, 7533), false)
);

WriteLiteral(">\r\n                        Name:\r\n");

WriteLiteral("                        ");

            
            #line 172 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                   Write(Path.GetFileName(File.FilePath));

            
            #line default
            #line hidden
WriteLiteral("\r\n                    </a>\r\n                </div>\r\n\r\n                <div>\r\n    " +
"                Size:\r\n");

WriteLiteral("                    ");

            
            #line 178 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
               Write(File.FileSize.FormatFileSize(1));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </div>\r\n\r\n");

            
            #line 181 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                
            
            #line default
            #line hidden
            
            #line 181 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                 if (Attr.AllowDeactivate)
                    {

            
            #line default
            #line hidden
WriteLiteral("                    <a");

WriteLiteral(" class=\"btn btn-default\"");

WriteAttribute("id", Tuple.Create(" id=\"", 8023), Tuple.Create("\"", 8066)
, Tuple.Create(Tuple.Create("", 8028), Tuple.Create("file-upload-button-", 8028), true)
            
            #line 183 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 8047), Tuple.Create<System.Object, System.Int32>(Model.PropertyName
            
            #line default
            #line hidden
, 8047), false)
);

WriteAttribute("href", Tuple.Create("\r\n                       href=\"", 8067), Tuple.Create("\"", 8224)
            
            #line 184 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
, Tuple.Create(Tuple.Create("", 8098), Tuple.Create<System.Object, System.Int32>(Url.Controller<ManageController>().Action(Controller => Controller.DeleteFile, File.FileUploadID, Request.Url?.AbsoluteUri)
            
            #line default
            #line hidden
, 8098), false)
);

WriteLiteral(">\r\n                        <glyph>&#xe014;</glyph>\r\n                        Remov" +
"e\r\n                    </a>\r\n");

            
            #line 188 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
                    }

            
            #line default
            #line hidden
WriteLiteral("            </div>\r\n");

            
            #line 190 "..\..\Views\Shared\Manage\Fields\FileUpload.cshtml"
            }
        }

            
            #line default
            #line hidden
        }
    }
}
#pragma warning restore 1591
