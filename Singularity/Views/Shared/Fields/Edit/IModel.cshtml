@* Generator: MvcView *@

@using LCore;
@using Singularity;
@using Singularity.Models;
@using Singularity.Controllers;
@using Singularity.Context;
@using Singularity.Routes;
@using Singularity.Annotations;
@using Singularity.Extensions;
@using System.Collections;
@using System.Collections.Generic;
@using System.ComponentModel;
@using System.ComponentModel.Design;
@using System.Web;
@using System.Web.Mvc;
@using System.Linq;
@using System.Linq.Expressions;
@using System.ComponentModel.DataAnnotations;
@using System.ComponentModel.DataAnnotations.Schema;

@{
    IModel SubModel = (IModel)Model.PropertyData;

    List<SelectListItem> Items = Model.GetRelationItems(Model.Meta.ModelType, SubModel);

    if (SubModel != null)
        {
        String ID = SubModel.GetID();
        
        SelectListItem Selected = Items.Where(s => s.Value == ID).FirstOrDefault();

        if (Selected != null)
            {
            Selected.Selected = true;
            }
        }
}

@model IViewField

@Html.DropDownList(Model.Meta.PropertyName, Items, new { @class = "select-list" })
